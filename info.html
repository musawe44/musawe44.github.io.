<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙƒØ«Ø±</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800;900&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0b1220;
  --card: rgba(255,255,255,.08);
  --border: rgba(255,255,255,.15);
  --text:#eef2ff;
  --muted:#cbd5e1;
}
body.light{
  --bg:#f4f6ff;
  --card: rgba(0,0,0,.05);
  --border: rgba(0,0,0,.12);
  --text:#0b1220;
  --muted:#475569;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Cairo",sans-serif;
  background:var(--bg);
  color:var(--text);
  padding:120px 14px 30px;
}

/* Ù†ÙØ³ Ø®Ù„ÙÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
.bgVideo{
  position:fixed; inset:0;
  width:100%; height:100%;
  object-fit:cover;
  z-index:-5;
  opacity:.35;
}
.overlay{
  position:fixed; inset:0;
  background:linear-gradient(120deg, rgba(11,18,32,.8), rgba(11,18,32,.7));
  z-index:-4;
}

.container{
  width:min(950px,100%);
  margin:auto;
  display:grid;
  gap:18px;
}

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:var(--card);
  border:1px solid var(--border);
  padding:16px;
  border-radius:18px;
  backdrop-filter:blur(10px);
}

.backBtn{
  text-decoration:none;
  padding:8px 14px;
  border-radius:12px;
  border:1px solid var(--border);
  background:rgba(255,255,255,.08);
  color:var(--text);
  font-weight:900;
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:18px;
  padding:18px;
  backdrop-filter:blur(10px);
}

.title{
  font-size:18px;
  font-weight:900;
  margin-bottom:12px;
}

.loading{
  opacity:.7;
  font-weight:900;
  color:var(--muted);
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(130px,1fr));
  gap:12px;
}

.miniBox{
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  text-align:center;
  font-weight:900;
  background:rgba(255,255,255,.05);
}

.footer{
  text-align:center;
  margin-top:20px;
  font-size:13px;
  opacity:.6;
}
</style>
</head>

<body>

<video class="bgVideo" autoplay muted loop playsinline>
  <source src="bg.mp4.mp4" type="video/mp4">
</video>
<div class="overlay"></div>

<div class="container">

  <div class="header">
    <div style="font-weight:900;font-size:20px;">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£ÙƒØ«Ø±</div>
    <a href="index.html" class="backBtn">Ø±Ø¬ÙˆØ¹</a>
  </div>

  <!-- Ø·Ù‚Ø³ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ -->
  <div class="card">
    <div class="title">Ø·Ù‚Ø³ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ â€” Ø§Ù„Ø¨ØµØ±Ø©</div>
    <div id="weekWeather" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  </div>

  <!-- Ø§Ù„Ø´Ø±ÙˆÙ‚ ÙˆØ§Ù„ØºØ±ÙˆØ¨ -->
  <div class="card">
    <div class="title">Ø§Ù„Ø´Ø±ÙˆÙ‚ ÙˆØ§Ù„ØºØ±ÙˆØ¨</div>
    <div id="sunData" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  </div>

  <!-- Ø­Ø¯Ø« Ù…Ø«Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… -->
  <div class="card">
    <div class="title">ÙÙŠ Ù…Ø«Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ…</div>
    <div id="todayEvent" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  </div>

  <!-- Ø¯Ø¹Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ… -->
  <div class="card">
    <div class="title">Ø¯Ø¹Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ…</div>
    <div id="dailyDua" class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  </div>

  <div class="footer">
    MUSAWI Â© <span id="year"></span>
  </div>

</div>

<script>
document.getElementById("year").textContent = new Date().getFullYear();

/* ========== Ø·Ù‚Ø³ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ========== */
async function loadWeather(){
  try{
    const res = await fetch(
      "https://api.open-meteo.com/v1/forecast?latitude=30.5085&longitude=47.7804&daily=temperature_2m_max,temperature_2m_min&timezone=Asia%2FBaghdad"
    );
    const data = await res.json();

    let html = '<div class="grid">';
    for(let i=0;i<7;i++){
      html += `
        <div class="miniBox">
          ${data.daily.time[i]}<br>
          ${Math.round(data.daily.temperature_2m_max[i])}Â° /
          ${Math.round(data.daily.temperature_2m_min[i])}Â°
        </div>`;
    }
    html += '</div>';
    document.getElementById("weekWeather").innerHTML = html;
  }catch{
    document.getElementById("weekWeather").textContent = "ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
  }
}

/* ========== Ø§Ù„Ø´Ø±ÙˆÙ‚ ÙˆØ§Ù„ØºØ±ÙˆØ¨ ========== */
async function loadSun(){
  try{
    const res = await fetch(
      "https://api.sunrise-sunset.org/json?lat=30.5085&lng=47.7804&formatted=0"
    );
    const data = await res.json();

    const sunrise = new Date(data.results.sunrise)
      .toLocaleTimeString("ar-IQ",{hour:'2-digit',minute:'2-digit'});
    const sunset = new Date(data.results.sunset)
      .toLocaleTimeString("ar-IQ",{hour:'2-digit',minute:'2-digit'});

    document.getElementById("sunData").innerHTML =
      `ğŸŒ… Ø§Ù„Ø´Ø±ÙˆÙ‚: ${sunrise}<br>ğŸŒ‡ Ø§Ù„ØºØ±ÙˆØ¨: ${sunset}`;
  }catch{
    document.getElementById("sunData").textContent = "ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
  }
}

/* ========== Ø­Ø¯Ø« Ø§Ù„ÙŠÙˆÙ… Ù…Ù† ÙˆÙŠÙƒÙŠØ¨ÙŠØ¯ÙŠØ§ ========== */
async function loadTodayEvent(){
  try{
    const today = new Date();
    const m = today.getMonth()+1;
    const d = today.getDate();

    const res = await fetch(
      `https://api.wikimedia.org/feed/v1/wikipedia/ar/onthisday/events/${m}/${d}`
    );
    const data = await res.json();

    const event = data.events[0];
    document.getElementById("todayEvent").innerHTML =
      `<b>${event.year}</b> â€” ${event.text}`;
  }catch{
    document.getElementById("todayEvent").textContent = "ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª";
  }
}

/* ========== Ø¯Ø¹Ø§Ø¡ Ø§Ù„ÙŠÙˆÙ… ========== */
const duas = [
"Ø¯Ø¹Ø§Ø¡ ÙŠÙˆÙ… Ø§Ù„Ø£Ø­Ø¯: Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø£ÙˆÙ„ ÙŠÙˆÙ…ÙŠ Ù‡Ø°Ø§ ØµÙ„Ø§Ø­Ø§Ù‹...",
"Ø¯Ø¹Ø§Ø¡ ÙŠÙˆÙ… Ø§Ù„Ø§Ø«Ù†ÙŠÙ†: Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†ÙŠ Ù…Ù† Ø§Ù„Ù…ØªÙˆÙƒÙ„ÙŠÙ† Ø¹Ù„ÙŠÙƒ...",
"Ø¯Ø¹Ø§Ø¡ ÙŠÙˆÙ… Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡: ÙŠØ§ Ø±Ø¨ Ø§Ø±Ø²Ù‚Ù†ÙŠ ØµÙØ§Ø¡ Ø§Ù„Ù‚Ù„Ø¨...",
"Ø¯Ø¹Ø§Ø¡ ÙŠÙˆÙ… Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡: Ø§Ù„Ù„Ù‡Ù… Ø«Ø¨ØªÙ†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù‚...",
"Ø¯Ø¹Ø§Ø¡ ÙŠÙˆÙ… Ø§Ù„Ø®Ù…ÙŠØ³: Ø§Ù„Ù„Ù‡Ù… Ù‚Ø±Ø¨Ù†ÙŠ Ø¥Ù„ÙŠÙƒ...",
"Ø¯Ø¹Ø§Ø¡ ÙŠÙˆÙ… Ø§Ù„Ø¬Ù…Ø¹Ø©: Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù†ÙŠ Ù…Ù† Ø£Ù‡Ù„ Ø§Ù„Ø¬Ù†Ø©...",
"Ø¯Ø¹Ø§Ø¡ ÙŠÙˆÙ… Ø§Ù„Ø³Ø¨Øª: Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… Ø¨Ø¯Ø§ÙŠØ© Ø®ÙŠØ±..."
];

function loadDua(){
  const day = new Date().getDay();
  document.getElementById("dailyDua").textContent = duas[day];
}

loadWeather();
loadSun();
loadTodayEvent();
loadDua();
</script>

</body>
</html>
