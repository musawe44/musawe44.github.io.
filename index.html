<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MUSAWI</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --card: rgba(255,255,255,.10);
      --border: rgba(255,255,255,.18);
      --text: #eef2ff;
      --muted:#d1d5db;
      --shadow: 0 18px 40px rgba(0,0,0,.38);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:"Cairo", system-ui, Arial;
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px 14px;
      overflow-x:hidden;
      background:#0b1220;
    }

    /* Background video */
    .bgVideo{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      z-index:-3;
      filter: saturate(1.1) contrast(1.05);
    }

    /* Overlay (light, no blur) */
    .overlay{
      position:fixed;
      inset:0;
      z-index:-2;
      background:
        radial-gradient(900px 500px at 80% 20%, rgba(34,197,94,.14), transparent 60%),
        radial-gradient(700px 450px at 20% 80%, rgba(59,130,246,.14), transparent 55%),
        linear-gradient(120deg, rgba(11,18,32,.22), rgba(11,18,32,.16));
      backdrop-filter: blur(0px);
    }

    /* ===== Cards + animations + hover ===== */
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      padding:18px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);

      position:relative;
      overflow:hidden;
      will-change: transform, opacity;
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
      animation: enter .65s ease both;
    }

    @keyframes enter {
      from { opacity: 0; transform: translateY(14px) scale(.99); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }

    .profile{ animation-delay: .05s; }
    .youtube{ animation-delay: .15s; }
    .social{  animation-delay: .25s; }
    .pageFooter{ animation-delay: .35s; }

    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(600px 200px at 20% 0%, rgba(255,255,255,.12), transparent 60%);
      opacity: 0;
      transition: opacity .25s ease;
      pointer-events:none;
    }

    .card:hover{
      transform: translateY(-4px);
      box-shadow: 0 22px 55px rgba(0,0,0,.45);
    }
    .card:hover::before{ opacity: 1; }

    .hero{
      display:flex;
      gap:16px;
      align-items:center;
    }

    .photo{
      width:92px;
      height:92px;
      border-radius:18px;
      border:1px solid var(--border);
      object-fit: cover;
      background: rgba(255,255,255,.06);
      flex:0 0 auto;
    }

    h1{ margin:0; font-size:30px; line-height:1.15; }
    .subtitle{ margin:6px 0 0; color:var(--muted); }

    .badges{
      margin-top:12px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }
    .badge{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      font-size:14px;
      color:var(--text);
      white-space:nowrap;
    }

    .section-title{
      margin:0 0 10px;
      font-size:18px;
      color:var(--text);
    }

    .quote{
      margin:0;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      line-height: 1.9;
    }
    .quote small{
      display:block;
      margin-top:8px;
      color: var(--muted);
      font-weight:600;
    }

    /* dynamic note under quote */
    .note{
      display:block;
      margin-top:10px;
      color: rgba(255,255,255,.80);
      font-size: 14px;
      line-height: 1.8;
    }

    /* ===== Links ===== */
    .links{
      display:grid;
      gap:10px;
      margin-top:10px;
    }
    .link{
      text-decoration:none;
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      transition:.15s transform, .15s background;
      position:relative;
      overflow:hidden;
    }
    .link:hover{ transform: translateY(-2px); background:rgba(255,255,255,.09); }

    .link::after{
      content:"";
      position:absolute;
      top:0; bottom:0;
      left:-120%;
      width:120%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,.18), transparent);
      transform: skewX(-18deg);
      transition: left .45s ease;
      pointer-events:none;
    }
    .link:hover::after{ left:120%; }

    .left{ display:flex; align-items:center; gap:10px; font-weight:700; }
    .icon{
      width:34px; height:34px;
      border-radius:10px;
      display:grid; place-items:center;
      background:rgba(255,255,255,.09);
      border:1px solid var(--border);
      font-size:16px;
    }

    /* ===== YouTube ===== */
    .video{
      margin-top:12px;
      border-radius:16px;
      overflow:hidden;
      border:1px solid var(--border);
      background: rgba(0,0,0,.20);
      aspect-ratio: 16 / 9;
    }
    .video iframe{
      width:100%;
      height:100%;
      border:0;
      display:block;
    }

    /* ===== Audio + Visualizer ===== */
    .audioBox{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      margin-top:10px;
    }
    .audioHint{ color:var(--muted); font-size:13px; margin:0; }

    .audioBtn{
      border:1px solid var(--border);
      background:rgba(255,255,255,.08);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      font-family:inherit;
      font-weight:800;
    }
    .audioBtn:hover{ background:rgba(255,255,255,.12); }

    .audioRow{
      display:flex;
      align-items:center;
      gap:10px;
      margin-top:10px;
    }

    .volumeWrap{
      flex:1;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
    }

    .volumeLabel{
      font-size:13px;
      color:var(--muted);
      white-space:nowrap;
    }

    .volume{
      width:100%;
      accent-color: rgba(34,197,94,.95);
    }

    .vizWrap{
      margin-top:10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      overflow:hidden;
    }
    #viz{
      width:100%;
      height:90px;
      display:block;
    }

    /* ===== Footer ===== */
    footer{
      text-align:center;
      color:rgba(255,255,255,.85);
      font-size:13px;
      padding:12px;
      background:rgba(255,255,255,.06);
      border:1px solid var(--border);
      border-radius:18px;
    }

    /* ===== Layout (YouTube left-top + Social left-bottom / Profile right) ===== */
    .gridWrap{
      width:min(980px,100%);
      position:relative;
      display:grid;
      gap:16px;

      grid-template-columns: .8fr 1.2fr;

      grid-template-areas:
        "youtube  profile"
        "social   profile"
        "footer   footer";
    }

    .profile{ grid-area: profile; }
    .youtube{ grid-area: youtube; }
    .social{ grid-area: social; }
    .pageFooter{ grid-area: footer; }

    .vDivider{
      position:absolute;
      top:14px;
      bottom:14px;
      left: 40%;
      width:1px;
      background: linear-gradient(to bottom, transparent, rgba(255,255,255,.25), transparent);
      box-shadow: 0 0 18px rgba(255,255,255,.12);
      border-radius:999px;
      pointer-events:none;
    }

    @media (max-width: 920px){
      .gridWrap{
        grid-template-columns: 1fr;
        grid-template-areas:
          "profile"
          "youtube"
          "social"
          "footer";
      }
      .vDivider{ display:none; }
    }
  </style>
</head>

<body>
  <!-- Background video -->
  <video class="bgVideo" autoplay muted loop playsinline>
    <source src="bg.mp4.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <main class="gridWrap">
    <div class="vDivider"></div>

    <!-- Right: Profile -->
    <section class="card profile">
      <div class="hero">
        <img class="photo" src="avatar.jpg" alt="My photo">
        <div>
          <h1>MUSAWI</h1>
          <p class="subtitle">Geology Student â€” University of Basrah | College of Science</p>

          <div class="badges">
            <span class="badge">ğŸ“š Learning</span>
            <span class="badge">ğŸ’» Computer Skills</span>
          </div>
        </div>
      </div>

      <hr style="border:none;border-top:1px solid rgba(255,255,255,.14); margin:14px 0;">

      <h2 class="section-title">About</h2>
      <blockquote class="quote">
        Ø§ÙØ¹Ù’Ù„ÙÙ…Ù’ ÙŠÙØ§ Ø¨ÙÙ†ÙÙŠÙ‘Ù Ø£ÙÙ†Ù‘ÙÙƒÙ Ø¥ÙÙ†Ù‘ÙÙ…ÙØ§ Ø®ÙÙ„ÙÙ‚Ù’ØªÙ Ù„ÙÙ„Ù’Ø¢Ø®ÙØ±ÙØ©Ù Ù„ÙØ§ Ù„ÙÙ„Ø¯Ù‘ÙÙ†Ù’ÙŠÙØ§ØŒ
        ÙˆÙÙ„ÙÙ„Ù’ÙÙÙ†ÙØ§Ø¡Ù Ù„ÙØ§ Ù„ÙÙ„Ù’Ø¨ÙÙ‚ÙØ§Ø¡ÙØŒ ÙˆÙÙ„ÙÙ„Ù’Ù…ÙÙˆÙ’ØªÙ Ù„ÙØ§ Ù„ÙÙ„Ù’Ø­ÙÙŠÙØ§Ø©Ù.
        <small>â€” Imam Ali (AS)</small>

        <span class="note" id="noteText">Loading...</span>
      </blockquote>
    </section>

    <!-- Left-top: YouTube -->
    <section class="card youtube">
      <h2 class="section-title">Music Video</h2>
      <div class="video">
        <iframe
          src="https://www.youtube.com/embed/BXChU6bMEXU"
          title="YouTube video"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen>
        </iframe>
      </div>
    </section>

    <!-- Left-bottom: Contact + Audio + Waves -->
    <aside class="card social">
      <h2 class="section-title">Contact</h2>

      <div class="audioBox">
        <p class="audioHint">ğŸµ Music + Waves</p>
        <button class="audioBtn" id="audioBtn">Play</button>
      </div>

      <div class="audioRow">
        <div class="volumeWrap">
          <span class="volumeLabel">Volume</span>
          <input class="volume" id="volume" type="range" min="0" max="100" value="70">
        </div>
      </div>

      <div class="vizWrap">
        <canvas id="viz"></canvas>
      </div>

      <audio id="bgAudio" preload="metadata" loop>
        <source src="audio.mp3.mp3" type="audio/mpeg">
      </audio>

      <div class="links">
        <a class="link" href="https://t.me/Mu29_iq" target="_blank" rel="noopener">
          <span class="left"><span class="icon">âœˆï¸</span>Telegram</span>
          <span>â†—</span>
        </a>

        <a class="link" href="https://www.instagram.com/mu29__/" target="_blank" rel="noopener">
          <span class="left"><span class="icon">ğŸ“¸</span>Instagram</span>
          <span>â†—</span>
        </a>
      </div>
    </aside>

    <footer class="pageFooter">
      Â© <span id="y"></span> â€” Indeed, with hardship comes ease
    </footer>
  </main>

  <script>
    // year
    document.getElementById("y").textContent = new Date().getFullYear();

    // ===== Google Sheet (dynamic note) =====
    const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSXkdu2p1KVIjDPGdb97HfmkKa2WuvKN349Z5qdZOd_RTCyT__xNLL44swa0EUAnq614hxS9p52NSlL/pub?gid=0&single=true&output=csv";

    fetch(SHEET_CSV_URL)
      .then(r => r.text())
      .then(csv => {
        const lines = csv.trim().split("\n");
        if (lines.length < 1) return;

        const firstLine = lines[0];
        const parts = firstLine.split(",");
        let text = "";

        // supports: note,value  OR  value only
        if (parts.length >= 2) text = parts[1];
        else text = parts[0];

        text = text.replace(/^"|"$/g, "").trim();

        if (text) document.getElementById("noteText").textContent = text;
      })
      .catch(()=>{});

    // ===== Audio + Visualizer =====
    const audioEl = document.getElementById("bgAudio");
    const btn = document.getElementById("audioBtn");
    const vol = document.getElementById("volume");

    const canvas = document.getElementById("viz");
    const ctx = canvas.getContext("2d");

    let audioCtx, analyser, srcNode, dataArray;
    let rafId = null;
    let playing = false;

    audioEl.volume = (Number(vol.value) || 70) / 100;
    vol.addEventListener("input", () => {
      audioEl.volume = (Number(vol.value) || 0) / 100;
    });

    function resizeCanvas(){
      const dpr = window.devicePixelRatio || 1;
      const rect = canvas.getBoundingClientRect();
      canvas.width = Math.floor(rect.width * dpr);
      canvas.height = Math.floor(rect.height * dpr);
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }

    function drawIdle(){
      const w = canvas.getBoundingClientRect().width;
      const h = canvas.getBoundingClientRect().height;
      ctx.clearRect(0,0,w,h);

      ctx.fillStyle = "rgba(255,255,255,0.03)";
      ctx.fillRect(0,0,w,h);

      ctx.strokeStyle = "rgba(255,255,255,0.35)";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(10, h/2);
      ctx.lineTo(w-10, h/2);
      ctx.stroke();
    }

    function ensureAudioGraph(){
      if(audioCtx) return;

      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioCtx.createAnalyser();
      analyser.fftSize = 2048;

      const bufferLength = analyser.frequencyBinCount;
      dataArray = new Uint8Array(bufferLength);

      srcNode = audioCtx.createMediaElementSource(audioEl);
      srcNode.connect(analyser);
      analyser.connect(audioCtx.destination);
    }

    function drawWave(){
      const w = canvas.getBoundingClientRect().width;
      const h = canvas.getBoundingClientRect().height;

      ctx.clearRect(0,0,w,h);
      ctx.fillStyle = "rgba(255,255,255,0.03)";
      ctx.fillRect(0,0,w,h);

      analyser.getByteTimeDomainData(dataArray);

      ctx.lineWidth = 2.5;
      ctx.strokeStyle = "rgba(255,255,255,0.85)";
      ctx.beginPath();

      const sliceWidth = w / dataArray.length;
      let x = 0;

      for(let i=0;i<dataArray.length;i++){
        const v = dataArray[i] / 128.0;
        const y = (v * h) / 2;
        if(i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
        x += sliceWidth;
      }

      ctx.lineTo(w, h/2);
      ctx.stroke();

      rafId = requestAnimationFrame(drawWave);
    }

    function startViz(){
      if(rafId) cancelAnimationFrame(rafId);
      drawWave();
    }

    function stopViz(){
      if(rafId) cancelAnimationFrame(rafId);
      rafId = null;
      drawIdle();
    }

    window.addEventListener("resize", () => {
      resizeCanvas();
      if(!playing) drawIdle();
    });

    resizeCanvas();
    drawIdle();

    btn.addEventListener("click", async () => {
      try{
        ensureAudioGraph();
        if(audioCtx.state === "suspended") await audioCtx.resume();

        if(!playing){
          await audioEl.play();
          playing = true;
          btn.textContent = "Pause";
          startViz();
        }else{
          audioEl.pause();
          playing = false;
          btn.textContent = "Play";
          stopViz();
        }
      }catch(e){
        btn.textContent = "Tap again";
      }
    });

    audioEl.addEventListener("pause", () => {
      playing = false;
      btn.textContent = "Play";
      stopViz();
    });
  </script>
</body>
</html>
